<!DOCTYPE html>
<html lang="ja">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link href="style.css" rel="stylesheet" />

    <title>おみくじアプリ</title>
  </head>
  <body>
    <div class="app-header-contents">
      <h1>- おみくじアプリ -</h1>
      <h2>今日のあなたの運勢は・・・</h2>
      <button class="start-button js-fortune-start" type="button">
        運勢を占う！
      </button>
    </div>

    <div class="result">
      <div class="row">
          <div class="radius money">
            <p class="title">金運</p>
            <p class="stars"></p>
            <p class="detail"></p>
          </div>
      </div>
      <div class="row">
          <div class="radius work">
            <p class="title">仕事運</p>
            <p class="stars"></p>
            <p class="detail"></p>
          </div>
          <div class="radius health">
            <p class="title">健康運</p>
            <p class="stars"></p>
            <p class="detail"></p>
          </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>

      // ここに処理を記載します
      $(function () {
        const fortuneResults = {
         money:[
          {stars:'★★★', detail:'最高の金運です！いつの間にかお金が溜まっているかも・・・？'},
          {stars:'★★', detail:'まずまず金運です！使いすぎには注意しましょう！'},
          {stars:'★', detail:'悪い傾向が見られます！財布の紐は絞めておくと吉です！'}
         ],
         work:[
          {stars:'★★★', detail:'最高の仕事運です！いつも以上にチャンスが巡ってくるかも・・・？'},
          {stars:'★★', detail:'まずまず仕事運です！普段通り仕事が進むでしょう！'},
          {stars:'★', detail:'悪い傾向が見られます！自信過剰にならないように注意しましょう'}
         ],
         health:[
          {stars:'★★★', detail:'最高の健康運です！ランニングの距離を伸ばしても良いですね！'},
          {stars:'★★', detail:'まずまず健康運です！無理せず体を動かしましょう！'},
          {stars:'★', detail:'悪い傾向が見られます！ケガにご注意を・・・'}
         ]
        };

      for(let title in fortuneResults) {
        console.log(title)
      }

      for (title in fortuneResults) {
        // おみくじをランダムに作成する関数を呼び出す
        const fortune_num = Math.floor( Math.random() * 3 );

        // 変数titleには 'money', 'work', 'health' のいずれかが入っています。
        console.log(fortuneResults[title][fortune_num]['stars'])
        console.log(fortuneResults[title][fortune_num]['detail'])

        //金運、仕事運、健康運の文字と占い結果をhtmlに出力する。
         $('.js-fortune-start').click(function() {
         $('.result').show();

        // TODO: ここにfor in文を記述する(money、work、healthの３回分処理が回る)
         for(let title in fortuneResults) {

        // TODO: for in分の中でfortune_numを宣言する(毎回ランダム数値を定義できる)
           const fortune_num = Math.floor( Math.random() * 3 );

        // for in分の中に記述する事でtitleや fortune_numの中身が変化しながら順番に処理される
	         $('.radius.'+title).find('.stars').text(fortuneResults[title][fortune_num]['stars']);
           $('.radius.'+title).find('.detail').text(fortuneResults[title][fortune_num]['detail']);

           $('.radius.'+title).find('.stars').text(fortuneResults[title][fortune_num]['stars']);
           $('.radius.'+title).find('.detail').text(fortuneResults[title][fortune_num]['detail']);

           $('.radius.'+title).find('.stars').text(fortuneResults[title][fortune_num]['stars']);
           $('.radius.'+title).find('.detail').text(fortuneResults[title][fortune_num]['detail']);
          }
         });
       }
      })

     { $(document).on('click', '.js-fortune-start', function() {
       $(this).toggleClass('js-fortune-start').toggleClass('js-fortune-restart').text('運勢を占う！');
       });
     }
     { $(document).on('click', '.js-fortune-restart', function() {
       $(this).toggleClass('js-fortune-start').toggleClass('js-fortune-restart').text('もう一度占う！');
       $('.result').hide();
       });
     }

    </script>
  </body>
</html>